# Readme

## Краткая информация
Этот проект создан для изучения оркестратора temporal

## Детальная информация
Функция сервиса - это модерация постов.
Через REST запрос приходит заявка на модерацию с текстомпоста.
Этот запрос сохраняется в БД.
Фоновый обработчик читает эту БД, находит первый необработанный запрос на модерацию
и запускает workflow модерации в temporal для него.

## Архитектура

Используется гексагональная архитектура, включающая адаптеры, доменную логику и входные точки.

## Хранилище

Первая версия хранилища хранит заявки на модерацию в памяти, в дальнейшем 
планируется добавить outbox таблицу в базе данных партиционированную по дате c
регулярным удалением устаревших заявок.

## Этапы модерации

1. Проверка на количество символов
2. Проверка на запрещенные слова
3. Проверка на везение

Для большей реалистичности задачи можно вынести саму логику модерации в сторонний сервис, 
а текущий оставить только в качестве оркестратора.

## Тестирование

1. Архитектурные тесты
2. Юнит тесты на отдельные этапы модерации
3. Юнит тест на общий воркфлоу temporal
4. Интеграционные тесты на апи

## UI

Просмотр воркфлоу в UI:
http://localhost:8888/

Swagger:
http://localhost:8080/swagger-ui/index.html

# Метрики

Нужно реализовать сбор метрик через графану и прометеус

- Метрики темпорал
- Метрики постгрес
- Метрики приложения